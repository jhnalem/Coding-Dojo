{% extends "./base.html" %}
{% block content %}
<div class="container">
    {% if request.session.user_id %}
        {% if messages %}
            <div class="section center-align messages">
            {% for message in messages %}
                {% if message.level == DEFAULT_MESSAGE_LEVELS.ERROR %}
                    <div class="card red darken-2">
                        <div class="card-content">
                            <p class="white-text">{{message}}</p>
                        </div>
                    </div>
                {% endif %}
            {% endfor %}

            {% for message in messages %}
                {% if message.level == DEFAULT_MESSAGE_LEVELS.SUCCESS %}
                    <div class="card green darken-2">
                        <div class="card-content">
                            <p class="white-text">{{message}}</p>
                        </div>
                    </div>
                {% endif %}
            {% endfor %}
            </div>
        {% endif %}

        <div class="section">
            <div class="row center-align">
                <h1>Welcome back, {{ request.session.user_name }}</h1>
            </div>

            <div class="row center-align">
                <a href="/logout" class="btn">Logout</a>
            </div>
        </div>
    {% else %}
        <h1 class="center-align">Login or Register</h1>

        {% if messages %}
            <div class="section center-align messages">
            {% for message in messages %}
                {% if message.level == DEFAULT_MESSAGE_LEVELS.ERROR %}
                    <div class="card red darken-2">
                        <div class="card-content">
                            <p class="white-text">{{message}}</p>
                        </div>
                    </div>
                {% endif %}
            {% endfor %}

            {% for message in messages %}
                {% if message.level == DEFAULT_MESSAGE_LEVELS.SUCCESS %}
                    <div class="card green darken-2">
                        <div class="card-content">
                            <p class="white-text">{{message}}</p>
                        </div>
                    </div>
                {% endif %}
            {% endfor %}
            </div>
        {% endif %}

        <div class="section">
            <div class="row">
                <div class="col s8 l5 offset-s2 offset-l1">{% include "./forms/login.html" %}</div>

                <div class="divider hide-on-large-only col s10 offset-s1"></div>

                <div class="col s8 l5 offset-s2 offset-l1">{% include "./forms/register.html" %}</div>
            </div>
        </div>
    {% endif %}
</div>
{% endblock %}
